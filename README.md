# Spotify-to-YouTube Linker üéµ

A lightweight Python utility designed to bridge the gap between **Exportify** and YouTube. This script processes your exported Spotify CSVs, searches YouTube for the official tracks, and generates a new CSV populated with verified YouTube URLs.

## üöÄ Features

* **Exportify Integration:** Tailored to work natively with the column headers generated by [Exportify](https://watsonbox.github.io/exportify/).
* **Quality Focused:** Uses `yt-dlp` filters to prioritize results from **Verified Channels**, ensuring you get official audio/videos rather than fan uploads.
* **Non-Destructive:** Creates a new timestamped output file while preserving all original metadata from your Spotify export.
* **Fast & Efficient:** Uses metadata extraction mode (no video downloading) to minimize bandwidth and processing time.

## üõ†Ô∏è Prerequisites

Before running the script, ensure you have the following installed:

* **Python 3.7+**
* **FFmpeg** (Recommended by `yt-dlp` for optimal metadata handling)

## üì• Installation

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/scottchampion/spotify-to-youtube-linker.git
    cd your-repo-name
    ```

2.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```
    *Note: The primary dependency is `yt-dlp`.*

## üìë Usage

1.  Export your Spotify playlist as a CSV using **Exportify**.
2.  Run the script from your terminal, passing the path to your CSV file:

```bash
python3 main.py your_playlist.csv
```

## How it works:
* **Data Extraction:** The script reads the `Track Name` and `Artist Name(s)` columns from your input CSV.
* **Smart Search:** It performs a targeted search using `yt-dlp` with a `channel_is_verified` filter to prioritize official artist channels and high-quality uploads.
* **Auto-Saving:** It creates a new file named `[original_name]_urls_YYYYMMDD_HHMMSS.csv` to ensure your original data remains untouched.
* **Rate Protection:** Includes a 1-second delay (`time.sleep(1)`) between searches to respect YouTube's rate limits and prevent IP throttling.

## ‚öôÔ∏è Configuration

If your CSV uses different headers, you can modify these constants at the top of the script:

| Constant | Default Value | Description |
| :--- | :--- | :--- |
| `SEARCH_COL_TRACK` | `'Track Name'` | The column title for the song name. |
| `SEARCH_COL_ARTIST` | `'Artist Name(s)'` | The column title for the artist(s). |
| `TARGET_COL` | `'Youtube URL'` | The name of the new column to be created. |


## üîß Troubleshooting

### Script stopped working or can't find tracks
YouTube frequently updates its site, which can break the scrapers used by `yt-dlp`. If the script starts failing, the first step is to update the core dependency:

```bash
pip install -U yt-dlp
```

### Access Denied / 403 Forbidden

If YouTube begins to throttle your connection, you may see 403 errors.

**Fix:** The script already includes a time.sleep(1) delay. If the issue persists, try increasing the sleep duration in main.py or running the script while connected to a different network/VPN.

### No verified results found

The script is hardcoded to look for verified channels to ensure audio quality. If you are searching for very obscure indie tracks or remixes, they may not exist on a verified channel.

**Workaround:** You can temporarily disable the 'match_filter': yt_dlp.utils.match_filter_func('channel_is_verified') line in main.py to allow all search results.

## ‚ö†Ô∏è Important Notes

* **Verified Filter:** The script is strictly configured to look for **verified channels**. If a track is very obscure and doesn't exist on a verified channel, the script may return `NOT_FOUND`.
* **Rate Limiting:** If you are processing massive playlists (e.g., 1,000+ songs), YouTube may temporarily throttle your IP. The built-in delay helps mitigate this.
* **Keyboard Interrupt:** You can press `Ctrl+C` at any time to stop the search. The script will safely close the file and save all progress made up to that point.